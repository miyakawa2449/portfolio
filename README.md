# Python 100 Days Challenge Portfolio

このサイトは、Pythonプログラミング100日チャレンジの学習記録と成果を公開するポートフォリオサイトです。

## 🚀 開発進捗

### 現在の進捗: フェーズ15完了 (15/17フェーズ - 88%)

**完了済みフェーズ（2025-08-22〜30）:**
- ✅ **フェーズ0**: リポジトリ準備と移行作業
- ✅ **フェーズ0.5**: データベース名の変更と環境設定の更新
- ✅ **フェーズ1**: 現状調査とバックアップ
- ✅ **フェーズ2**: データベースリセットと基本設定
- ✅ **フェーズ3**: トップページ（ランディングページ）の実装
- ✅ **フェーズ3.5**: 複数チャレンジ管理システムの実装
- ✅ **フェーズ4**: 記事とチャレンジの統合機能
- ✅ **フェーズ5**: プロジェクト紹介セクションの実装
- ✅ **フェーズ6**: 記事とプロジェクトの双方向連携機能
- ✅ **フェーズ7**: アイキャッチ画像ギャラリー機能
- ✅ **フェーズ8**: カテゴリ管理のチャレンジ別分離機能
- ✅ **フェーズ9**: 記事公開日管理機能の実装（2025-08-24完了）
- ✅ **フェーズ10**: ポートフォリオ向けプロフィールページの最適化（2025-08-25完了）
- ✅ **フェーズ11**: ポートフォリオ管理画面スキル機能の完全刷新（2025-08-28完了）
- ✅ **フェーズ12**: ビジネス戦略強化・仕事受注促進システム実装（2025-08-29完了）
- ✅ **フェーズ13**: SEO・LLMO対策 + サイト内検索機能 + 目次機能（2025-08-30午前完了）
- ✅ **フェーズ14**: Docker環境構築とローカルテスト（2025-08-30午後完了）
- ✅ **フェーズ15**: AWS Lightsail新規サーバー構築・セキュリティ強化（2025-08-30夕方完了）

**✅ 2025-08-30完了作業（フェーズ13 + フェーズ14 + フェーズ15）:**

**フェーズ13: SEO・LLMO対策 + UI/UX機能強化（午前）**
- ✅ **SEO・LLMO対策実装**: JSON-LD構造化データ・articles.json_ldフィールド追加・AI検索最適化
- ✅ **記事目次機能**: Markdown見出し自動抽出・スムーズスクロール・アクティブセクション表示・アンカーID統一・表示制御
- ✅ **プロジェクト導線強化**: 詳細記事ボタン・複数記事ドロップダウン・記事準備中ステータス・逆導線実装
- ✅ **サイト内検索機能**: 記事・プロジェクト横断検索・フィルタリング・ページング・ヘッダー検索バー・レスポンシブUI

**フェーズ14: Docker環境構築（午後）**
- ✅ **Docker Desktop for Mac**: インストール・設定完了（v28.3.3）
- ✅ **開発環境**: docker-compose.dev.yml（ライブリロード・ログ共有）
- ✅ **本番環境**: docker-compose.prod.yml（Nginx + SSL対応）
- ✅ **アプリケーション設定**: Dockerfile（Python 3.13-slim）
- ✅ **データベース設定**: MySQL 8.0対応設定ファイル
- ✅ **デプロイ自動化**: server-setup.sh, deploy.sh スクリプト作成
- ✅ **ローカルテスト**: Docker環境での動作確認完了

**フェーズ15: AWS Lightsail新規サーバー構築・セキュリティ強化（夕方）**
- ✅ **新規インスタンス**: Ubuntu 24.04 LTS + 静的IP（52.198.3.169）
- ✅ **SSL証明書**: Let's Encrypt（miyakawa.codes・2025年11月4日まで有効）
- ✅ **Fail2Ban**: SSHブルートフォース攻撃自動防止・リアルタイム通知
- ✅ **Logwatch**: 日次システムレポート（HTML・毎朝6:00 JST自動送信）
- ✅ **AWS SES統合**: メール通知システム（Postfix + TLS暗号化）
- ✅ **監視自動化**: 24/7セキュリティ監視・攻撃統計・インシデント対応

**✅ 2025-08-26午前完了作業:**
- ✅ **プロフィール情報活用拡大**: ランディングページ紹介文・プロフィールページ出身地/誕生年月追加
- ✅ **SNS情報管理システム完全刷新**: ext_jsonフィールド活用・URL形式対応・フッター全SNS表示実現
- ✅ **ナビゲーション統一化**: 重複テンプレート整理・全ページ一貫性確保・動的リンク実装
- ✅ **技術基盤強化**: from_jsonフィルター追加・安全なJSONデータ処理・エラー防止対策

**✅ 2025-08-28全日完了作業:**
- ✅ **MySQL JSON順序保持問題解決**: JSONオブジェクトの順序不保証問題を配列形式変更で完全解決
- ✅ **スキル管理UI完全実装**: カテゴリ並び替え（ドラッグ&ドロップ+上下ボタン）と個別スキル並び替え（ドラッグ&ドロップ）
- ✅ **イベント伝播制御**: 親子要素のドラッグイベント競合を`e.stopPropagation()`で解決
- ✅ **メッセージシステム改善**: JavaScript alertから画面上部Bootstrapバナーへ刷新（自動非表示・色分け対応）
- ✅ **技術的最適化**: デバッグ体制構築・問題解決・コードクリーンアップ・エラーハンドリング強化
- ✅ **後方互換性**: 既存オブジェクト形式データとの完全互換性を維持

**✅ 2025-08-29全日完了作業:**
- ✅ **ビジネス戦略変革**: 学習ポートフォリオからビジネス中心サイトへの大幅刷新
- ✅ **サイト構造変更**: Home | Services | Portfolio | Story | About の5ページ構成実現
- ✅ **URL統一**: /profile → /about、/challenge → /portfolio への変更
- ✅ **テンプレート同期**: public_layout.htmlのナビゲーション・チャレンジバナー統一
- ✅ **UI完全統一**: ヒーロー背景色・進捗バーコントラスト・英語ナビゲーション

**次回実装予定（フェーズ14-17）:**
- 🔍 **フェーズ14**: サイト内検索機能 + 最終UI調整（予定: 2-3時間）
- 🐳 **フェーズ15**: Docker化実装（環境統一・デプロイリスク軽減）（予定: 2-3時間）
- 🔧 **フェーズ16**: 最終動作テスト・デバッグ・パフォーマンス最適化（予定: 2-3時間）
- ☁️ **フェーズ17**: AWS Lightsailデプロイ（Docker環境での基盤インフラ構築）（予定: 2-3時間）

**フェーズ14-17詳細計画:**

### フェーズ14: サイト内検索機能 + 最終調整（予定: 2-3時間）
- ⬜ **サイト内検索機能**: 記事・プロジェクト横断検索・フィルタリング機能強化
- ⬜ **記事構造改善**: 学習+技術詳細+制作ポイント整理
- ⬜ **最終UI調整**: 細かいレスポンシブ対応・アクセシビリティ改善

### フェーズ15: Docker化実装（予定: 2-3時間）
- ⬜ **Dockerfile作成**: Python 3.13 + Flask環境の完全定義
- ⬜ **docker-compose.yml**: Flask + MySQL + Redis構成
- ⬜ **環境移行**: .env設定・ローカルDocker環境構築・動作確認

### フェーズ16: 最終テスト・デバッグ（予定: 2-3時間）
- ⬜ **動作テスト**: 全機能の動作確認・レスポンシブテスト・ブラウザ互換性
- ⬜ **パフォーマンス最適化**: 読み込み速度改善・画像最適化・CSS/JS最適化
- ⬜ **デバッグ**: エラーハンドリング強化・ログ管理・セキュリティチェック

### フェーズ17: AWS Lightsailデプロイ + 本番運用開始（予定: 3-4時間）
- ⬜ **基盤構築**: スナップショット復元 + Docker環境構築
- ⬜ **nginx設定**: リバースプロキシ + SSL終端（Let's Encrypt）
- ⬜ **セキュリティ**: UFW firewall・fail2ban・SSL証明書設定
- ⬜ **本格データ**: 実際のポートフォリオ・記事・プロジェクトデータ移行
- ⬜ **独自ドメイン**: DNS設定・Google Analytics連携・最終公開
- ⬜ **運用確認**: 全機能確認・SEO設定・監視体制構築

**📊 推定総残り作業時間**: 9-12時間・**月額コスト**: $40

## 概要

- **目的**: Pythonでのプログラミングスキル向上と学習過程の記録
- **期間**: 100日間の継続的な学習チャレンジ
- **内容**: データ分析、機械学習、Web開発などの実践的なプロジェクト

## 技術スタック

### **バックエンド**
- **Framework**: Python 3.13, Flask 2.3.3
- **Database**: MySQL 8.0 + SQLAlchemy 2.0 ORM
- **Authentication**: Flask-Login + TOTP 2FA
- **Email**: AWS SES統合（開発・本番対応）
- **Migration**: Flask-Migrate (Alembic)
- **PDF Generation**: ReportLab 4.0.7（履歴書PDF出力）
- **Email Validation**: email-validator 2.2.0
- **Cloud Storage**: boto3 1.35.0（AWS連携）

### **セキュリティ**
- **CSRF Protection**: Flask-WTF
- **XSS Prevention**: Bleach HTML Sanitization
- **Password**: Werkzeug Security (ハッシュ化)
- **Security Headers**: X-Frame-Options, CSP, HSTS等
- **URL Obfuscation**: カスタム管理画面URL
- **Session Management**: セキュアなセッション管理

### **フロントエンド**
- **UI Framework**: Bootstrap 5.3（2025-08-25統一移行）
- **Markdown Editor**: リアルタイムプレビュー対応
- **Image Processing**: Cropper.js + PIL
- **JavaScript**: ES6+, リアルタイムプレビュー
- **Icons**: Font Awesome
- **Code Highlighting**: Syntax highlighting for code blocks
- **Date Picker**: Flatpickr（日本語対応）
- **Progress Animation**: CSS アニメーション・プログレスバー

### **インフラ・デプロイ**
- **Production**: Ubuntu 24.04 LTS + Nginx + Gunicorn
- **Cloud**: AWS Lightsail（$40/月: インスタンス$20 + DB$15 + IP$5）
- **SSL**: Let's Encrypt自動化
- **Security**: fail2ban, UFW firewall
- **Deploy Strategy**: 段階デプロイ（基盤→サンプルデータ→本格運用）

## 主要機能

### 🎯 実装済みポートフォリオ機能
- ✅ **複数チャレンジ管理**: 100日チャレンジを複数並行管理
- ✅ **進捗自動計算**: 日々の学習記録と進捗表示（自動/手動調整）
- ✅ **プロジェクトショーケース**: 完成プロジェクトのギャラリー・複数デモURL対応
- ✅ **記事⇔プロジェクト双方向連携**: 関連付け・相互リンク表示
- ✅ **チャレンジ別カテゴリ管理**: 厳密分離によるコンテンツ整理
- ✅ **記事公開日管理**: Flatpickrカレンダー式日付選択・公開日ソート対応
- ✅ **ランディングページ**: 現代的なポートフォリオ表示・個人ブランディング強化
- ✅ **GitHub統合**: 複数リポジトリとの連携対応
- ✅ **SNS統合**: X・Facebook・Instagram・YouTube URL管理・フッター表示統一
- ✅ **スキル管理UI完全実装**: ドラッグ&ドロップによるカテゴリ・個別スキル並び替え
- ✅ **MySQL順序保持システム**: JSON配列形式による完全な順序管理
- ✅ **メッセージシステム改善**: ユーザビリティ重視のバナー形式メッセージ

### ✅ 継承・拡張済み機能
- ✅ **Markdownエディター**: リアルタイムプレビュー付き
- ✅ **画像ギャラリー**: アップロード・ギャラリー選択・検索・フィルタ機能
- ✅ **画像管理システム**: クロップ・編集・メタデータ管理
- ✅ **2段階認証（2FA）**: Google Authenticator対応
- ✅ **SEO最適化**: メタタグ、OGP設定
- ✅ **コメントシステム**: 承認制コメント機能
- ✅ **動的フォーム更新**: チャレンジ選択による関連項目自動絞り込み

### 🚀 API機能
- ✅ **RESTful API**: チャレンジ別プロジェクト・カテゴリ取得
- ✅ **画像ギャラリーAPI**: 既存画像の検索・フィルタ・選択
- ✅ **リアルタイム更新**: JavaScript連携による動的UI更新

## セットアップ

### 要件
- Python 3.13+
- MySQL 8.0+
- 仮想環境（venv/conda推奨）

### 1. リポジトリのクローン

```bash
git clone https://github.com/miyakawa2449/portfolio.git
cd portfolio
```

### 2. 仮想環境の作成と有効化

#### venvを使用する場合：
```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
```

#### condaを使用する場合：
```bash
conda create -n portfolio-py313 python=3.13
conda activate portfolio-py313
```

### 3. 環境設定ファイルの作成

```bash
cp .env.example .env
# .envファイルを編集して必要な情報を設定
```

### 4. 依存関係のインストール

```bash
pip install -r requirements.txt
```

### 5. データベースの初期化

```bash
flask db upgrade
```

### 6. 管理者アカウントの作成

```bash
python scripts/create_admin.py
```

### 7. 開発サーバーの起動

```bash
python app.py
```

サーバーは http://127.0.0.1:5001 で起動します。

## プロジェクト構造

```
portfolio/
├── 🐍 Core Application
│   ├── app.py                 # メインアプリケーション
│   ├── admin.py               # 管理画面Blueprint
│   ├── models.py              # データベースモデル
│   ├── forms.py               # WTForms定義
│   ├── article_service.py     # 記事管理サービス
│   └── ga4_analytics.py       # Google Analytics統合
├── 📁 Static Assets
│   ├── static/
│   │   ├── css/              # スタイルシート
│   │   ├── js/               # JavaScriptファイル
│   │   └── uploads/          # アップロード画像
│   └── templates/            # Jinja2テンプレート
│       ├── admin/            # 管理画面テンプレート
│       └── *.html            # 公開ページテンプレート
├── 🗄️ Database
│   ├── migrations/           # データベースマイグレーション
│   └── instance/             # SQLiteデータベース（開発用）
├── 📝 Documentation
│   ├── reports/              # 作業レポート・計画書
│   ├── CLAUDE.md            # AIアシスタント用ガイド
│   ├── WORK_STATUS.md       # 作業進捗管理
│   └── README.md            # このファイル
└── ⚙️ Configuration
    ├── requirements.txt      # Python依存関係
    ├── .env                  # 環境変数（要作成）
    ├── .env.example         # 環境変数テンプレート
    └── .gitignore           # Git除外設定
```

## データベース設計

### 主要テーブル（2025-08-23 最新）
- **users**: ユーザー認証・プロフィール・2FA設定・SNS連携
- **challenges**: 複数チャレンジ管理・進捗・リポジトリ連携
- **articles**: 記事データ・SEO設定・公開管理・チャレンジ/プロジェクト関連付け
- **projects**: プロジェクトショーケース・技術スタック・GitHub/デモURL
- **categories**: カテゴリ階層・メタ情報・チャレンジ別分離
- **uploaded_images**: 画像管理・メタデータ・ギャラリー機能
- **comments**: コメント・承認状態
- **site_settings**: サイト全体設定
- **login_history**: ログイン履歴
- **seo_analysis**: SEO分析データ

### データベース関係
- **多対多**: Articles ↔ Categories, Articles ↔ Projects (JSON)
- **一対多**: Challenges → Articles, Challenges → Projects, Challenges → Categories
- **一対多**: Users → Articles, Users → UploadedImages
- **階層構造**: Categories (parent_id による自己参照)
- **JSON関係**: Articles.project_ids, Projects.tech_stack, Challenges.github_repos

## 環境変数設定（.env）

```env
# Flask設定
SECRET_KEY=your-secret-key-here
FLASK_ENV=development

# データベース設定
DATABASE_URL=mysql+pymysql://username:password@localhost:3306/portfolio_db?charset=utf8mb4

# セキュリティ設定
ADMIN_URL_PREFIX=XXXXXXXXXXXXXXX
LOGIN_URL_PATH=XXXXXXXXXXXXXXX

# Google Analytics（オプション）
GA4_MEASUREMENT_ID=G-XXXXXXXXXX

# AWS設定（将来使用予定）
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
```

## セキュリティ機能

- **2段階認証（2FA）**: Google Authenticator対応
- **CSRF保護**: すべてのフォームで実装
- **XSS対策**: Bleachによる入力サニタイゼーション
- **SQLインジェクション対策**: SQLAlchemy ORM使用
- **セキュアセッション**: HTTPOnly、SameSite設定
- **カスタムURL**: 管理画面URLの難読化

## トラブルシューティング

### よくある問題

1. **データベース接続エラー**
   ```bash
   # MySQLサービスの確認
   sudo systemctl status mysql
   # または
   brew services list  # macOS
   ```

2. **依存関係エラー**
   ```bash
   pip install --upgrade pip
   pip install -r requirements.txt
   ```

3. **マイグレーションエラー**
   ```bash
   flask db stamp head
   flask db migrate -m "Fix migration"
   flask db upgrade
   ```

4. **ポート競合**
   - app.pyのポート番号を変更（デフォルト: 5001）

## 最新実装完了項目

### ✅ 2025-08-28全日完了: フェーズ11前半 - スキル管理機能完全刷新
- **MySQL JSON順序保持問題解決**: JSONオブジェクトの順序不保証問題を配列形式変更で完全解決
- **スキル管理UI完全実装**: カテゴリ並び替え（ドラッグ&ドロップ+上下ボタン）と個別スキル並び替え（ドラッグ&ドロップ）
- **イベント伝播制御**: 親子要素のドラッグイベント競合を`e.stopPropagation()`で解決
- **メッセージシステム改善**: JavaScript alertから画面上部Bootstrapバナーへ刷新（自動非表示・色分け対応）
- **技術的最適化**: デバッグ体制構築・問題解決・コードクリーンアップ・エラーハンドリング強化
- **後方互換性**: 既存オブジェクト形式データとの完全互換性を維持

### ✅ 2025-08-26午前完了: プロフィール・SNS・ナビゲーション統一化
- **プロフィール情報活用拡大**: introduction（紹介文）をランディングページに表示、birthplace・birthdayをプロフィールページに追加
- **SNS情報管理システム刷新**: ext_jsonフィールドを活用したURL形式のSNS管理、X・Facebook・Instagram・YouTube完全対応
- **from_jsonフィルター実装**: Jinja2テンプレートでのJSON安全解析、エラーハンドリング付き
- **テンプレート統一**: layout.htmlとpublic_layout.html両方にSNS表示機能追加、重複template整理
- **ナビゲーション一貫性**: 全ページでのナビゲーション統一、ハードコードURL除去、動的admin_user情報表示

### ✅ フェーズ10完了: ポートフォリオ向けプロフィールページの最適化（2025-08-25）
- **データベース拡張**: Userモデルに11個の新フィールド追加（職歴・スキル・学歴・資格等）
- **プロフィール写真機能**: アップロード・クロップ・プレビュー機能実装
- **スキル表示**: カテゴリ別・熟練度レベル別色分け・プログレスバー・アニメーション効果
- **職歴タイムライン**: 時系列表示・詳細な業務内容表示
- **学歴・資格セクション**: カード形式での整理表示
- **PDFダウンロード機能**: 動的日付生成による履歴書PDF作成（ReportLab使用）
- **管理画面機能**: タブ式プロフィール編集・AJAX対応・リアルタイム更新

### ✅ テンプレート・CSS大幅改善（2025-08-25）
- **Bootstrap 5.3移行**: 新しい`public_layout.html`作成・内蔵CSS完全排除
- **プログレスバー問題解決**: CSS競合解消・視覚的改善・アニメーション効果実装
- **レスポンシブ対応**: モバイル・タブレット・デスクトップ対応
- **旧ファイル整理**: バックアップ作成後、旧テンプレート・CSS削除
- **最小限ナビゲーション**: ホームリンク追加（全体ナビゲーション実装は予定）

### ✅ 技術的改善（2025-08-25）
- **Python 3.13環境**: 新conda環境作成・全依存関係更新・パフォーマンス向上
- **パッケージ管理**: email-validator等の不足パッケージ追加・requirements.txt更新
- **エラー解決**: BuildError修正・エンドポイント名整合性確保

### ✅ フェーズ9完了: 記事公開日管理機能（2025-08-24）
- **カレンダーUI実装**: Flatpickr日本語対応カレンダー式日付選択
- **記事ソート改善**: 全記事を公開日基準ソートに変更（created_at fallback付き）
- **既存データ適正化**: Challenge #1（2024-01-15開始）、Challenge #2（2025-07-01開始）
- **複数デモURL対応**: プロジェクトに複数デモURL登録・表示機能

### ✅ 個人ブランディング・UI強化（2025-08-24）
- **ランディングページ強化**: プロフィールセクション・統計情報追加
- **サイト全体ブランディング**: 「Tsuyoshi - Python 100 Days」統一
- **レスポンシブ改善**: チャレンジタイトル見切れ修正・CTAボタン最適化
- **ナビゲーション強化**: プロフィールページへの導線複数設置

## 今後の実装予定（フェーズ12 - 2025-08-29）

### 🎯 **最高優先: ビジネス戦略強化＋仕事受注促進システム**

#### **現在の課題認識**
現在のポートフォリオは技術力証明には優れているが、**ビジネス成果を生む仕組み**が不足している：
- ✅ 技術スキル・経歴・実績は十分に表示
- ❌ 明確なサービス提供内容（何ができるのか？）
- ❌ 料金体系・予算感（どれくらいコストがかかるのか？）  
- ❌ 具体的な成果・実績（ROI、数値での効果）
- ❌ クライアント導線（興味を持った人がどうアクションすべきか？）
- ❌ 信頼構築要素（お客様の声、実績事例、保証など）

#### **明日の相談＋実装内容**
1. **ビジネス戦略コンサルティング**: ターゲット設定・価値提案・差別化・料金体系の決定
2. **行動促進UI/UX設計**: CTAボタン・お問い合わせフロー・サービス紹介セクションの実装
3. **信頼構築コンテンツ**: 成果重視の実績表示・ケーススタディ・安心感を与える情報の企画
4. **情報発信戦略**: 技術ブログから「価値提供」型コンテンツへの展開

#### **期待される成果**
- **現在**: 見た人が技術力は理解できるが、問い合わせ・相談につながりにくい
- **目標**: 見た人が「この人に仕事を依頼したい」と思い、実際に行動する仕組みの構築

### 🔄 **従来項目（優先度調整）**
1. **SEO・LLMO対策強化**: 構造化データ（JSON-LD）実装・メタデータ最適化・サイトマップ自動生成（中優先度）
2. **サイト完成度向上**: プロジェクト詳細ページ作成・検索機能強化・レスポンシブ最終調整（中優先度）
3. **品質・セキュリティ向上**: SNS URLバリデーション強化・パフォーマンス最適化・アクセシビリティ対応（低優先度）
4. **AWS Lightsailデプロイ**: ビジネス成果が見込めるサイト完成後に実施（後回し）

### 📊 プロジェクト完成度: 76% (13/17フェーズ完了)
- **コア機能**: 100%完了（記事管理・プロジェクト管理・チャレンジ管理）
- **ユーザー体験**: 100%完了（ナビゲーション・SNS統合・プロフィール最適化・メッセージシステム改善）
- **技術基盤**: 100%完了（セキュリティ・データベース・API・JSON順序保持システム）
- **管理画面**: 100%完了（スキル管理UI完全実装・ドラッグ&ドロップ機能）
- **SEO・最適化**: 90%完了（構造化データ・目次・プロジェクト導線完了・検索機能のみ残存）
- **Docker化**: 0%完了（フェーズ14で実装予定）
- **デプロイ準備**: 0%完了（フェーズ16で実装予定）

## ライセンス

このプロジェクトは個人のポートフォリオとして作成されています。

## 連絡先

- GitHub: [miyakawa2449](https://github.com/miyakawa2449)
- Email: t.miyakawa244@gmail.com

---

**Made with ❤️ using Flask, MySQL, and modern web technologies**